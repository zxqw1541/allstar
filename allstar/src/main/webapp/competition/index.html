<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>게시판-목록</title>
<link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.css">
<script type="text/javascript">

</script>
</head>
<body>

<section>
<h1>대회</h1>

<button id="newBtn" type="button" class="btn btn-primary btn-xs">새 글</button><br>
<table id="listTable" class="table table-hover">
  <thead>
		<tr>
			<th>번호</th>
			<th>종목</th>
			<th>팀명</th>
			<th>대회명</th>
			<th>인원수</th>
			<th>참가비</th>
			<th>대회시작일</th>
			<th>대회종료일</th>
			<th>모집시작일</th>
			<th>모집마감일</th>
			<th>내용</th>
			<th>사진주소</th>
			<th>우편번호</th>
			<th>기본주소</th>
			<th>대회쿼리문</th>
		</tr>
	</thead>
</table>
</section>


<script type="text/javascript" src="../lib/jquery/jquery.js"></script>
<script>
$.getJSON('ajax/list.do', function(resultObj) {	
	  var table = $("#listTable");
	  for (var c of resultObj.ajaxResult.data) {
	    $("<tr>")
	      .html("<td>" + c.no +
	            "</td><td>" + c.eno +
	            "</td><td>" + c.tno + 
	            "</td><td><a class='detailLnk' href='#' competitionNo='" 
	                + c.no + "'>" + c.name + 
	            "</a></td><td>" + c.joinNum + "/" + c.teamNum +
	            "</td><td>" + c.cost +
	            "</td><td>" + c.startDate +
	            "</td><td>" + c.endDate +
	            "</td><td>" + c.recruitStartDate +
	            "</td><td>" + c.recruitEndDate +
	            "</td><td>" + c.content +
	            "</td><td>" + c.poster +
	            "</td><td>" + c.postNo +
	            "</td><td>" + c.baseAddr +
	            "</td><td>" + c.operation +
	            "</td>")
	      .appendTo(table);
	  }
	  // 제목 링크에 클릭 이벤트 리스너를 등록한다.
	  $("a.detailLnk").click(clickDetailLnk);
	});

$('#newBtn').click(function(event){
	  location.href = "form.html";
	});
	
//게시물 제목을 클릭했을 때 호출될 함수
function clickDetailLnk(event) {
  event.preventDefault(); 
  location.href = "modify.html?no=" + $(event.target).attr("competitionNo");
}
</script>

</body>
</html>