<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>게시판-목록</title>
<link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.css">
</head>
<body>

<section>
<h1>대회</h1>

<button id="newBtn" type="button" class="btn btn-primary btn-xs">새 글</button><br>
<table id="listTable" class="table table-hover">
  <thead>
		<tr>
			<th>번호</th>
			<th>대회명</th>
			<th>타입</th>
			<th>이벤트</th>
			<th>개최지</th>
			<th>팀숫자</th>
			<th>참가비</th>
			<th>대회시작일</th>
			<th>대회종료일</th>
			<th>모집시작일</th>
			<th>모집마감일</th>
			<th>내용</th>
			<th>개최자아이디</th>
		</tr>
	</thead>
</table>

</section>


<script type="text/javascript" src="../lib/jquery/jquery.js"></script>
<script>
$.getJSON('ajax/list.do', function(resultObj) {
	  var table = $("#listTable");
	  for (var c of resultObj.data) {
	    $("<tr>")
	      .html("<td>" + c.no + 
	            "</td><td><a class='detailLnk' href='#' competitionNo='" 
	                + c.no + "'>" + c.name + 
	            "</a></td><td>" + c.views +
	            "</td><td>" + c.event + 
	            "</td><td>" + c.venue +
	            "</td><td>" + c.teamNum +
	            "</td><td>" + c.joinCost +
	            "</td><td>" + c.startDate +
	            "</td><td>" + c.endDate +
	            "</td><td>" + c.recruitStartDate +
	            "</td><td>" + c.recruitEndDate +
	            "</td><td>" + c.content +
	            "</td><td>" + c.hostId +
	            "</td>")
	      .appendTo(table);
	  }
	  // 제목 링크에 클릭 이벤트 리스너를 등록한다.
	  $("a.detailLnk").click(clickDetailLnk);
	});

$('#newBtn').click(function(event){
	  location.href = "form.html?no=-1";
	});
	
//게시물 제목을 클릭했을 때 호출될 함수
function clickDetailLnk(event) {
  event.preventDefault(); 
  location.href = "form.html?no=" + $(event.target).attr("competitionNo");
}
</script>

</body>
</html>