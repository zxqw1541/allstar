<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="css/tos/comp.css" />
<style>
#team_information span {
font-size: 25px;
margin:30px;
}

#member_photo {
width:391px; 
height:600px; 
 border: 1px black solid; 
float:right;
overflow-y: auto;
}

#member_photo img {
width:150px;
height:155px;
}

#member_photo p {
width:162px; 
height:190px; 
float: left; 
margin-left: 22px;
}
#member_photo label {
text-align:center;
    color: indigo;
    font-size: 20px;
}

#team_btfld {
/* border: 1px black solid; */
width:394px;
height:280px;
float:right;
margin-top: 0px;
}
#team_information {
width:380px; 
height:923px; 
/* border: 1px black solid; */
}
</style>
<script src="js/test/modernizr.custom.js"></script>

</head>
<body>

	<div>
	<h2 style="text-align: center;">내가 개설한 팀</h2>
		<div class="container demo-3">

			<ul class="grid cs-style-4" id="myteams" >


			</ul>
			<ul class="grid cs-style-4" id="myteams_info" style="display:none; min-width:860px;">
       
        <li id='member_photo'></li>
        <li id='team_btfld'></li>
        <li id='team_information'></li>
      </ul>
		</div>
		

	</div>
	<script>
$.getJSON('../member/ajax/memberJoin.do?mno=' +sessionStorage.getItem("mem_num"), function(resultObj) {
    console.log(resultObj.data);
    if(resultObj.status == "success"){
    for (var joinTeam of resultObj.data ){
    	if(joinTeam.level == 1){
    	var event =0;
    	console.log("tno : "+joinTeam.tno+"  eno : "+joinTeam.team.eno);
    	switch(joinTeam.team.eno){
    	case 2:  event = "농구";
    	   break;
    	case 3:  event = "축구";
        break;
    	case 4:  event = "야구";
        break;
    	case 5:  event = "탁구";
        break;
    	case 6:  event = "볼링";
        break;
    	}
    	var emblem = joinTeam.team.emblem;
    	if(emblem == null){
    		emblem = "allstardefault.png";
    	}
    	var ul = $('#myteams');
    	$("<li style='margin-left: 120px;'>")
    	.html("<figure><div>"
    			+"<img src='../team/img/"+emblem+"' style='width:300px;' alt='"+ joinTeam.team.name+"'></div>"
    			+"<figcaption>"
    			+"<h3>"+joinTeam.team.name+"</h3>"
    			+"<span>팀장 :  팀장 호출</span><br>"
    			+"<span >연고지 : "+joinTeam.team.postNo+" "+joinTeam.team.baseAddr+" </span><br>"
    			+"<span >종목 : "+event+" </span><br>"
    			+"<span>전적 : "+joinTeam.team.win+" 승  "+joinTeam.team.draw+" 무  "+joinTeam.team.lose+" 패</span><br>"
    			+"<span>내용 : "+joinTeam.team.introduce+"</span><br>"
    			+"<a id='myteam_info"+joinTeam.tno+"' href='javascript:;' teamNo='"+joinTeam.tno+"'>팀 정보 보기</a>"
    			+"</figcaption></figure></li>"
    	).appendTo(ul);
    } else {
    	 var ul = $('#myteams');
         $("<li>").html(+ "현재 개설한 팀이 없습니다. </li>").appendTo(ul);
    }
    	$("#myteam_info"+joinTeam.tno+"").click(goTeamInfo);
    }
    } else {
    	var ul = $('#myteams');
    	$("<li>").html(+ "현재 개설한 팀이 없습니다. </li>").appendTo(ul);
    }
});



function goTeamInfo(event){
console.log("teamNo : "+ $(event.target).attr('teamNo'));
$('#myteams').hide();
$('#myteams_info').show();

$.getJSON('../member/ajax/teamJoin.do?tno=' + $(event.target).attr('teamNo') ,function(resultObj){
  for(var joinTeam of resultObj.data) {
  var level = joinTeam.level;
  console.log("jt.mno : " + joinTeam.mno);
  if(level == 1){
    level='팀장';
    }else {
      level='';
    }
var li = $('#member_photo');
$("<p>")
.html("<img id='"+joinTeam.member.id+"'"
    +"src='../member/img/"+joinTeam.member.photo+"' >"
    +"<label for='#"+joinTeam.member.id+" '>"+joinTeam.member.id+" "+level+"</label>").appendTo(li);
  }
});
var li= $('#team_btfld');
$("<p>")
.html("<button>버튼</button>"
    +"<button>버튼</button></p>").appendTo(li);

$.getJSON('../team/ajax/detail.do?tno=' + $(event.target).attr('teamNo') ,function(resultObj){
  var team = resultObj.ajaxResult.data;
  var li = $('#team_information');
  var emblem = team.emblem;
  if(emblem == null)
    emblem = "allstardefault.png";
$("<p>")
.html("<img style='width:350px; height:350px;' src='../team/img/"+emblem+"'><br>"
    +"<span> 팀명 : "+team.name+"</span><br> <span></span><br>"
    +"<span> 장소 : "+ team.baseAddr +" </span><br> <span></span><br>"
    +"<span> 정모일 : "+ team.meetDay +" </span><br>"
    +"<span> 회비 : "+ team.fee +" </span><br>"
    +"<span> 전적 : "+ team.win +" 승 "+team.draw+" 무 "+team.lose+" 패</span><br>"
    +"<span> 팀 소개 : "+ team.introduce +" </span><br>"
    +"</p>").appendTo(li);
});        

}
</script>


</body>
</html>