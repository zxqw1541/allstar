<!DOCTYPE html>
<html lang="en">
<head>
<title>All Star</title>
<meta charset="utf-8">

<link rel="stylesheet" href="css/header.css">
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" type="text/css" href="css/style.css" media="all" />

<script src="js/com_func.js"></script>
<script type="text/javascript" src="js/jquery-1.5.min.js"></script>
<script src="js/superfish.js"></script>
<script src="js/jquery.equalheights.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/jquery.ui.totop.js"></script>
<script type="text/javascript" src="js/ddsmoothmenu.js"></script>
<script type="text/javascript" src="js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" src="js/quicksand.js"></script>
<script type="text/javascript" src="js/scripts.js"></script>
<script>
jQuery(document).ready(function () {
    $().UItoTop({
        easingType: 'easeOutQuart'
    });
});


</script>

</head>


<body>
    
    
<!-- /////////////////////////////header start//////////////////////-->


<header>
  <div class="container_12">
    <div class="grid_12">
        <img src="images/allstar.png" width="200px" style="float:left">
      <div class="menu_block">
          <div style="color:white;text-align:right;display:block">
            <a href="#" style="padding-right:15px">Login</a>     
            <a href="#">Sign In</a>
          </div>
        <nav>
          <ul class="sf-menu">
            <li class="current"><a href="boardList.html">종목별 게시판</a>
              <ul id="eventmenu">
              </ul>
              </li>
            <li><a href="#">대회</a>
            <ul>
                <li><a href="#">* 농구</a></li>
                <li><a href="#">* 축구</a></li>
                <li><a href="#">* 야구</a></li>
                <li><a href="#">* 배드민턴</a></li>
              </ul>
            </li>
            <li><a href="#">팀</a>
            <ul>
                <li><a href="#">* 농구</a></li>
                <li><a href="#">* 축구</a></li>
                <li><a href="#">* 야구</a></li>
                <li><a href="#">* 배드민턴</a></li>
              </ul></li>
            <li><a href="#">자유게시판</a></li>
          </ul>
          
        </nav>
        
        <div class="menu_searchbar">
            <span class="icon"></span>
            <input type="search" id="search" placeholder="Search..." />
        </div>
         
      </div>
      
      <div class="clear"></div>
    </div>
  </div>
</header>
 <!--///////////////////////// header 끝 /////////////////////////////// -->

<br>

<div >
  <div class="container_12" style="background:white; box-shadow: 3px 5px 5px darkgray;">
    <div class="grid_top" >
    <h1> Board List </h1>
    <a href="#" class="btn">새 글</a>
    <div class="menu_searchbar">
            <span class="icon"></span>
            <input type="search" id="search" placeholder="Search..." />
    </div>
    </div>
  </div>
</div>

 <div id="container">
 
  <!-- Begin Wrapper -->
  <div id="wrapper">
 
    <div id="portfolio">
      <!-- Begin Portfolio Navigation -->
      <ul class="gallerynav">
        <li class="selected-1"><a href="#" data-value="all">All<span></span></a></li>
      </ul>
      <!-- End Portfolio Navigation -->
      <!-- Begin Portfolio Elements -->
      <ul id="gallery" class="grid">
      </ul>
      <!-- End Portfolio Elements -->
    </div>
  </div>
  <!-- End Wrapper -->
  <div class="clearfix"></div>
  <div class="push"></div>
</div>
 
  <!-- Begin Footer -->
  
<a href="#" id="toTop" style="margin-right: -529px; right: 50%; display: inline;"><span id="toTopHover" style="opacity: 0;"></span></a>

<footer>
  <div class="container_12" >
    <div class="grid_12" >
        <img src="images/AllStarfoot.png" width="200px" style="float:left">
      <div class="menu_block" style="color:white;"><br>
          팀 allstar code : 팀장 유승우 , 허순종 , 박중권 , 이지현 , 이승렬 
          <div style="color:white;text-align:right;display:block">
            <a href="#" style="padding-right:15px">Login</a>     
            <a href="#">Sign In</a>
          </div>

      </div>
      
      <div class="clear"></div>
    </div>
  </div>
</footer>

<script type="text/javascript">

$(document).ready(function () {
    $("#gallery a[rel^='prettyPhoto']").prettyPhoto({
        theme: 'light_square',
        autoplay_slideshow: false
    });
    
    $("ul.grid img").hide()
    $("ul.grid img").each(function (i) {
        $(this).delay(i * 200).fadeIn();
    });
});

/* 리스트 출력 */
$.getJSON('/allstar/board/ajax/list.do', function(resultObj){
	var eventmenu = $("#eventmenu");
	for (var event of resultObj.events) {
	    $("<li>" )
	        .html("<a href='#'>" + "* " + event.name + "</a>")
	        .appendTo(eventmenu);
	  }

	var portul = $(".gallerynav");
	for (var event of resultObj.events) {
		$("<li>" )
        .html("<a href='#' data-value='" + event.eno + "'>" + event.name + "<span></span></a>")
        .appendTo(portul);
	}
	
	var ul = $("#gallery");
  for (var board of resultObj.boards) {
	  var content = board.content;
	  console.log(typeof content);
	  if (content.length > 40) {
		  content = content.substring(0,40).concat("...");
	  }
	  
	  $("<li data-id='id-" + board.no + "' class='" + board.event.eno + "' style='width: 900px;'>")
	  .html(
        "<div class='container_bList'"
          + "style='background: white; box-shadow: 3px 5px 5px darkgray; margin-top: 5px;'>"
          + "<div class='grid_7'>"
          + "<div style='position: relative; margin-bottom: 20px'>"
          + "<div class='board_img'>"
          + "<a href='#' class='detailLink' boardBno='" + board.no + "'>" 
          + "<img style='box-shadow: 3px 5px 5px darkgray;' src='images/tour/soccer1.jpeg' alt=''></a>" 
          + "</div>"
          + "<div style='position: relative; padding-left: 250px; margin-top: 10px;'>"
          + "<a href='#' class='detailLink' boardBno='" + board.no + "' style='font-size: 24px; font-weight: 600;'>"
          + board.title + "</a><br> by " + board.member.name + "<br>"
          + "<div style='margin-top: 30px;'>"
          + "내용 : " + content + "<br>"
          + "종목 : " + board.event.name + "<br>"
          + "조회수 : " + board.views
          + "</div></div></div></div></div></li></ul>")
    .appendTo(ul);
	  
	// 제목 링크에 클릭 이벤트 리스너를 등록한다.
	  $("a.detailLink").click(clickDetailLnk);
	
  }
  

  /************************************************************************/// /* SORTING *//************************************************************************/

  (function($) {
    $.fn.sorted = function(customOptions) {
      var options = {
        reversed: false,
        by: function(a) {
          return a.text();
        }
      };
      $.extend(options, customOptions);
    
      $data = $(this);
      arr = $data.get();
      arr.sort(function(a, b) {
        
          var valA = options.by($(a));
          var valB = options.by($(b));
        if (options.reversed) {
          return (valA < valB) ? 1 : (valA > valB) ? -1 : 0;        
        } else {    
          return (valA < valB) ? -1 : (valA > valB) ? 1 : 0;  
        }
      });
      return $(arr);
    };

  })(jQuery);

  $(function() {
    
    var read_button = function(class_names) {
      var r = {
        selected: false,
        type: 0
      };
      for (var i=0; i < class_names.length; i++) {
        if (class_names[i].indexOf('selected-') == 0) {
          r.selected = true;
        }
        if (class_names[i].indexOf('segment-') == 0) {
          r.segment = class_names[i].split('-')[1];
        }
      };
      return r;
    };
    
    var determine_sort = function($buttons) {
      var $selected = $buttons.parent().filter('[class*="selected-"]');
      return $selected.find('a').attr('data-value');
    };
    
    var determine_kind = function($buttons) {
      var $selected = $buttons.parent().filter('[class*="selected-"]');
      return $selected.find('a').attr('data-value');
    };
    
    var $preferences = {
      duration: 800,
      easing: 'easeInOutQuad',
      adjustHeight: false
    };
    
    var $list = $('#gallery');
    var $data = $list.clone();
    
    var $controls = $('.gallerynav');
    
    $controls.each(function(i) {
      
      var $control = $(this);
      var $buttons = $control.find('a');
      
      $buttons.bind('click', function(e) {
        
        var $button = $(this);
        var $button_container = $button.parent();
        var button_properties = read_button($button_container.attr('class').split(' '));      
        var selected = button_properties.selected;
        var button_segment = button_properties.segment;

        if (!selected) {

          $buttons.parent().removeClass('selected-1'); $button_container.addClass('selected-' + 1);
          
          var sorting_type = determine_sort($controls.eq(1).find('a'));
          var sorting_kind = determine_kind($controls.eq(0).find('a'));
          
          if (sorting_kind == 'all') {
            var $filtered_data = $data.find('li');
          } else {
            var $filtered_data = $data.find('li.' + sorting_kind);
          }
          
          if (sorting_type == 'size') {
            var $sorted_data = $filtered_data.sorted({
              by: function(v) {
                return parseFloat($(v).find('span').text());
              }
            });
          } else {
            var $sorted_data = $filtered_data.sorted({
              by: function(v) {
                return $(v).find('strong').text().toLowerCase();
              }
            });
          }
          
          $list.quicksand($sorted_data, function() {
      
      $(document).ready(function(){
        $("#gallery a[rel^='prettyPhoto']").prettyPhoto({theme:'light_square', autoplay_slideshow: false});
      });
      
      $(function() {
      // OPACITY OF BUTTON SET TO 50%
      $("ul.grid img").css("opacity","1.0");
          
      // ON MOUSE OVER
      $("ul.grid img").hover(function () {
                            
      // SET OPACITY TO 100%
      $(this).stop().animate({
      opacity: 0.5
      }, "slow");
      },
          
      // ON MOUSE OUT
      function () {
            
      // SET OPACITY BACK TO 50%
      $(this).stop().animate({
      opacity: 1.0
      }, "slow");
      });
      });
                                  
    $("a.zoom2 img").mouseover(function(){
      $(this).stop(true,true);
      $(this).fadeTo(300, 0.5);
    });
    
    $("a.zoom2 img").mouseout(function(){
      $(this).fadeTo(400, 1.0);
    });
    
    
    $("a.play2 img").mouseover(function(){
      $(this).stop(true,true);
      $(this).fadeTo(300, 0.5);
    });
    
    $("a.play2 img").mouseout(function(){
      $(this).fadeTo(400, 1.0);
    });
    
      });
  }  
        e.preventDefault();
      });
      
    }); 
    
  });
  
});

//게시물 제목을 클릭했을 때 호출될 함수
function clickDetailLnk(event) {
  event.preventDefault(); 
  location.href = "form.html?no=" + $(event.target).attr("boardBno");
}

</script>

</body>
</html>