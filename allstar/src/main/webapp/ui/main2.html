<!DOCTYPE html>
<html lang="en">
<head>
<title>All Star</title>
<meta charset="utf-8">

<link type="text/css" rel="stylesheet" href="css/main2.css" />
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/component.css" />
<link rel="stylesheet" type="text/css" href="css/tos/styles.css" />
<link rel="stylesheet" type="text/css" href="css/tos/tos.css" />
<link rel="stylesheet" type="text/css" href="css/tos/teamlist.css" />

<script src="js/jquery-1.11.3.js"></script>
<script src="js/jquery.leanModal.min.js"></script>
<script src="js/modernizr.min.js"></script>

<script src="http://dmaps.daum.net/map_js_init/postcode.v2.js"></script>

<script>

$(function() {
    $('a[rel*=leanModal]').leanModal({ closeButton: ".modal_close" });   
});


</script>

</head>
<body>

<!-- header start -->
<div class="tournament_slider" id="tournament_slider">
<div id='top_header'>
<header >
<a href="#tournament_slider"><img src="images/allstar.png" ></a>
          <div class="auth">
          <span id="login" style="display:none;">
		          <a style='margin-right:10px;color:white;' id='go' rel='leanModal' href='#signup'>Login</a>
       <a style='margin-right:10px;color:white;' href='#signin' rel='leanModal'>Sign In</a> 
		     </span>
		     <span id="logout" style="display:none;">
		                <a style='margin-right:10px;color:white;' id='info' href='Member_info.html'>회원정보</a>
		        <a style='margin-right:10px;color:white;' id='out' href='#'>Log out</a>
        </span>
          </div>
            <div id="cssmenu" >
              <nav >
                <ul >
                  <li  class='active has-sub' ><a href="#top_event_list"><span>종목별 게시판</span></a>
                    <ul id="eventmenu">
                    
                    </ul>
                 </li>
                  <li class='has-sub'><a href="#tournament_cat">대회</a>
                    <ul>
                      <li><a href="competitionList.html">농구</a></li>
				                <li><a href="#">축구</a></li>
				                <li><a href="#">야구</a></li>
				                <li><a href="#">볼링</a></li>
                        <li><a href="#">탁구</a></li>
                   </ul>
                </li>
                  <li class='has-sub'><a href="#newest_team">팀</a>
				            <ul>
				                <li><a href="#">농구</a></li>
				                <li><a href="#">축구</a></li>
				                <li><a href="#">야구</a></li>
				                <li><a href="#">볼링</a></li>
                        <li><a href="#">탁구</a></li>
				           </ul></li>
                       <li class='last'><a href="#">자유게시판</a></li>
              </ul>
        </nav>
        </div>
</header>
<!-- header end -->


</div>



<div style="height:100px;"></div>
<!-- tournament slider start -->
<section id="photostack-3" class="photostack" >
  <div id="photo_div">

  </div>
</section>
      

</div>
<!-- tournament slider end -->

<div class="container"  >
<!-- top 게시판 list starts-->
<div class="top_event_list" id="top_event_list">
  
  <div id="content" >
  <div class="boardContents boardList">
    <div class="innerWrap" style="opacity:0.9;">

   

   <section class="topInfoArea clearFix">
   
   
        <div class="listFrame listNotice" style="background-color: white; width:500px;">
          <div class="header clearFix">
            <h3 class="titNotice">TOP 게시물</h3>
            <p class="btnMore"><a href="boardList12.html" class="sprBtn"> 더 보기</a></p>
          </div>
  <div class="contents tabArea">
<!-- left tab -->  
    <ul class="list tabFrame" id="top_con">

      
    </ul>
          </div>
        </div>
        

<div class="listFrame listGM commonTab" style="background-color: white; width:500px;">
  <div class="header clearFix">
    <h3 class="titGM">최근 게시물</h3>
     <p class="btnMore"><a href="boardList12.html" class="sprBtn"> 더 보기</a></p>
<!--     <ul class="nav">
      <li><a href="#" class="on">공략</a></li>
      <li><a href="#">UCC</a></li>
    </ul> -->
  </div>
  <div class="contents tabArea">
  
    <!-- right tab -->
    <ul class="list tabFrame" id="newest_tab">

  
    </ul>   
  </div>
</div>

      </section>
</div>
</div>
</div>

</div>
<!-- top 게시판 list ends-->


<!-- tournament category starts-->
<div class="tournament_cat" id="tournament_cat">

<div style="height:140px;"></div>
      <!--Mainimg-->
      <div id="Mainimg">
        <a href="#"><img src="images/tour/baseball.jpg"></a>
        <a href="#"><img src="images/tour/football.png"></a>
        <a href="#"><img src="images/tour/basketball.png"></a>
        <a href="#"><img src="images/tour/tishtennis.JPG"></a>
        <a href="#"><img src="images/tour/bowling.jpeg"></a>
      </div>
      <!--Mainimginfo-->
      <div id="Mainimginfo">
        <div id="Mimginfo1">
          <p ><B>야구</B><BR><B></B>팀 신청 /  팀 가능</p>
        </div>
        <div id="Mimginfo2">
          <p ><B>축구</B><BR><B></B>팀 신청 /  팀 가능</p>
        </div>
        <div id="Mimginfo3">
          <p ><B>농구</B><BR><B>0</B>팀 신청 / 256 팀 가능</p>
        </div>
        <div id="Mimginfo4">
          <p><B>탁구</B><BR><B></B>팀 신청 /  팀 가능</p>
        </div>
        <div id="Mimginfo5">
          <p ><B>볼링</B><BR><B></B>팀 신청 /  팀 가능</p>
        </div>
        <p class="clear"></p>
      </div>


</div>
<!-- tournament category ends-->


<!-- newest team starts-->
<div class="newest_team" id="newest_team">
<div style="height:172px;"></div>
<div>
<h3 class="stit">신생 팀<p class="more"><a href="teamList.html" class="sprBtn"> 더 보기</a></p></h3>
     
</div>
<div class="m_content" >
      <!-- container -->
      <div id="container_sports" >    
        <!-- team list -->
        <ul class="list_team">
         
</ul>
        <!-- //team list -->
        
      </div>
      <!-- //container -->
    </div>
    <!--//content-->




</div>

<!-- newest team ends-->



<!-- footer start -->
<footer>
<img src="images/allstar.png" >
</footer>
<!-- footer end -->
</div>



<!-- 가입 폼 -->
<div id="signin">
      <div id="signup-ct">
        <div id="signup-header">
          <h2>회원가입</h2>
          <p>회원가입을 하세요</p>
        </div>
        
        <form action="" method="POST">
          <div class="txt-fld">
            <label for="username">Username</label>
            <input id="id_signin" class="good_input" name="username" type="text" />
            <button id="check" >체크</button>
            <iframe id="check_id" ></iframe>
          </div>
        
          <div class="txt-fld">
            <label for="password">Password</label>
            <input id="pass_signin" name="password" type="password" />

          </div>
                    <div class="txt-fld">
            <label for="password2">Password 확인</label>
            <input  name="password2" type="password" />

          </div>
          <div class="btn-fld">
          <button id="addBtn" type="submit">가입하기 &raquo;</button>
          <input type="checkbox" id="saveId"> 
          <label id="saveLabel" for="saveId">아이디 저장</label>
</div>
         </form>
      </div>
    </div>
<!-- 가입폼 끝 -->



<!-- 로그인 폼 -->
<div id="signup">
      <div id="signup-ct">
        <div id="signup-header">
          <h2>로그인</h2>
          <p>ID 와 비밀번호를 입력하세요.</p>
        </div>
        
        <form action="" method="POST">
            <div id="loading"></div>
          <div class="txt-fld">
            <label for="username">Username</label>
            <input id="id_input" class="good_input" name="username" type="text" />

          </div>
        
          <div class="txt-fld">
            <label for="password">Password</label>
            <input id="pass_input" name="password" type="password" />

          </div>
          <div class="btn-fld">
          <button id="loginBtn" type="submit">로그인 &raquo;</button>
          <input type="checkbox" id="saveId"> 
          <label id="saveLabel" for="saveId">아이디 저장</label>
</div>
         </form>
      </div>
    </div>
<!-- 로그인폼 끝 -->


<script type="text/javascript" src="js/jquery.cookie.js"></script>
<script type="text/javascript" src="js/jquery.session.js"></script>



<script>
     $.getJSON('/allstar/competition/list.do?pageSize=10', function(resultObj){
var div = $('#photo_div');

         for (var competition of resultObj.ajaxResult.data) {
           $("<figure>")
           .html("<a href='#' class='photostack-img'><img src='images/tour/basket1.jpeg' /></a>"
            +"<figcaption>"
            +"<h2 class='photostack-title'>"+ competition.name +"</h2>"
            +"<div class='photostack-back'>"
            +"<p>Tournament Title :" + competition.name + "<br>"+ competition.joinNum +" out of "+ competition.teamNum + " are in!!<br>"
            + competition.content + "</p>"
            + "</div>"
            +"</figcaption></figure>"
          ).appendTo('#photo_div'); 
           $("<figure data-dummy>"
           +"<a href='#' class='photostack-img'><img src='images/tour/bad1.jpeg' alt='img16'/></a>"
           +"<figcaption>"
            +"<h2 class='photostack-title'>"+competition.name+"</h2>"
           +"</figcaption>"
         +"</figure>").appendTo('#photo_div'); 
         }
         
         new Photostack( document.getElementById('photostack-3'), {
             callback : function( item ) {
             console.log(item);
             }
           });

     });
/* +"</figure><figure data-dummy>"
     +"<a href='#' class='photostack-img'><img src='images/tour/bad1.jpeg' alt='img16'/></a>"
     +"<figcaption>"
      +"<h2 class='photostack-title'>"+competition.name+"</h2>"
     +"</figcaption>"
   +"</figure>"  */
     </script>
  


<script>
//로그인 시작

$(document).ready( function() {
  var id = $.cookie("id");
  if (id != null && id != "") {
    $("#id_input").val(); // email textbox에 쿠키값 출력
    $("#saveId").attr("checked", "checked"); // 체크박스에 체크
  }
}); 

  $('#loginBtn').click( function(event) {
         var checkStatus = $("#saveId").is(":checked");
        if (checkStatus) {
          $.cookie("id", $("#id_input").val());
        } else {
          $.cookie("id", "");
        }  
         console.log("login?");
        $.post('../auth/ajax/login.do', {
          id : $('#id_input').val(),
          password : $('#pass_input').val()
        }, function(resultObj) {
          var ajaxResult = resultObj.ajaxResult;
          if (ajaxResult.status == "success") {
            emailSession = ajaxResult.data.id;
            numSession = ajaxResult.data.mno;
            $.session.set('loginSession',emailSession);
            $.session.set('mem_num',numSession);
            $("#logout").show();
            $("#login").hide();
            console.log($.session._cookieCache["loginSession"]);
              var session_id=$.session._cookieCache["loginSession"];
              var span = $("#logout");
              $("<a style='margin-right:10px;color:white;'  href='#'>"+session_id+"</a>")
                .appendTo(span);
                
           
            console.log("success");
          } else {
            alert("아이디와 패스워드가 일치하지 않습니다.");
          }
        }, 'json');
      });
  
  $(document).ready( function() {
  if ($.session.get("loginSession") != undefined) {
	  $("#logout").show();
	  $("#login").hide();
	  console.log($.session._cookieCache["loginSession"]);
	    var session_id=$.session._cookieCache["loginSession"];
	    var span = $("#logout");
	    $("<a style='margin-right:10px;color:white;'  href='#'>"+session_id+"</a>")
        .appendTo(span);
        
  }else {
	  $("#login").show();
	  $("#logout").hide();

  }
}); 
  
  $('#out').click( function(event) {
	  $.session.remove("loginSession");  
	  $("#login").show();
	  $("#logout").hide();
	   /*  var span = $("#login");
	    $("<a style='margin-right:10px;color:white;' id='go' rel='leanModal' href='#signup'>Login</a>"     
	      +"<a style='margin-right:10px;color:white;' href='#'>Sign In</a>")
	      .appendTo(span); */
	  
  });
  
  // 로그인 끝

</script>




    <script src="js/custom.js"></script>
    
    <script>
    
    $.getJSON('/allstar/board/ajax/list.do?pageSize=5', function(resultObj){
    	   var eventmenu = $("#eventmenu");
    	    for (var event of resultObj.events) {
    	        $("<li>" )
    	            .html("<a href='/allstar/ui/boardList12.html'>" + event.name + "</a>")
    	            .appendTo(eventmenu);
    	      }

    	    /* 최신 글 */
    	    var ul = $("#newest_tab");
    	    for (var board of resultObj.boards) {
    	      $("<li data-id='id-" + board.no + "' class='" + board.event.eno + "' style='margin-left:-25px;'>")
    	      .html(
    	            "<a href='#' class='detailLink' boardBno='" + board.no + "'>" 
    	            + "<span class='txt'>" 
    	            + "<span class='cat'>" + board.event.name  +"</span>"
    	            + board.title +"<small>("+0+")</small>" 
    	            + "<img class='bulArticle bulLike' src='http://s.nx.com/s2/game/tos/obt/common/bullet/bul_gmlike.png' alt='최근글' />"
    	            + "</span>"
    	            + "<span class='date'>"+board.createDate+"</span></a></li>")
    	      .appendTo(ul);
    	  
   
    	      $("a.detailLink").click(clickDetailLnk);
    	    }
    	    function clickDetailLnk(event) {
    	        event.preventDefault(); 
    	        location.href = "form.html?no=" + $(event.target).attr("boardBno");
    	      } 
    });
    
    
    /* 뷰 순위 */
    $.getJSON('/allstar/board/ajax/list.do?pageSize=5&keyword=views', function(resultObj){

    	 var ul = $("#top_con");
         for (var board of resultObj.boards) {
           $("<li data-id='id-" + board.no + "' class='" + board.event.eno + "' style='margin-left:-25px;'>")
           .html(
                 "<a href='#' class='detailLink' boardBno='" + board.no + "'>" 
                 + "<span class='txt'>" 
                 + "<span class='cat'>" + board.event.name  +"</span>"
                 + board.title +"<small>("+0+")</small>" 
                 + "<img class='bulArticle bulLike' src='http://s.nx.com/s2/game/tos/obt/common/bullet/bul_gmlike.png' alt='인기글' />"
                 + "</span>"
                 + "<span class='date'>"+board.createDate+"</span></a></li>")
           .appendTo(ul);
       
  
           $("a.detailLink").click(clickDetailLnk);
         }
         function clickDetailLnk(event) {
             event.preventDefault(); 
             location.href = "form.html?no=" + $(event.target).attr("boardBno");
           } 
   });
    
    /* 팀 오버뷰 */
    
    $.getJSON('/allstar/team/ajax/list.do?pageSize=5', function(resultObj){
    	
        var ul = $(".list_team");
          for (var team of resultObj.teams) {
        	  var emblem = team.emblem; 
              if(emblem == null){
                  emblem = "allstardefault.png";
                } 
            $("<li id='team_"+ team.tno+"'>")
            .html(
              "<a href='#' class='detailLink' teamTno='" + team.tno + "'>"
                +"<img src='../team/img/"+ emblem +"' alt='"+ team.name +"' >"
                +"<span>"+team.name+"</span>"
                +"<span>"+team.baseAddr+"</span>"
                +"<span>소개 : "+team.introduce+"</span>"
              +"</a></li>" )
    .appendTo(ul);
   
            $("a.detailLink").click(clickDetailLnk);
          }
          function clickDetailLnk(event) {
              event.preventDefault(); 
              location.href = "form.html?no=" + $(event.target).attr("teamTno");
            } 
    });
    
    
    
    $(function() {
        $("#addBtn").click(function() {
          var form = $('form')[0];
          var data = new FormData();
          
          data.append('id', $('#id_signin').val());
          data.append('pwd', $('#pass_signin').val());
          
           $.ajax({
             url : "../member/ajax/add.do",
             data : data,
             type : "POST",
             dataType: "json",
             enctype: 'multipart/form-data',
             processData: false, 
             contentType:false,
             success : function(result) {
               console.log(result);
             if (result.ajaxResult.status == "success") {
                location.href = "/allstar/ui/main2.html";
               } else {
                alert("팀 등록에 실패했습니다.");
               }
             },
             error : function(result){
                alert('error');
             }
           });
        });
      });
    
    
           </script>

<!--            <script>
           $('#check').click(function(event) {
        	 /*   $('#check_id').attr("src","http://localhost:8989/idTest?id=" + $('#id_signin').val());
        	   location.href="#"; */

        	        var uID = $('#id_signin').val();
        	        var duplBool = false;
        	        var ID_dupl_resTxt = $("#check_id");
        	        
        	            if( uID == "" ){
        	                alert('ID를 입력해주세요.');
        	                return false;
        	            }
        	            var param = encodeURI('id='+uID);
        	            ID_dupl_resTxt.load('http://localhost:8989/idTest?id=' + param, complete);
        	            function complete(){
        	                var res = $("#id_res_Bool").text();
        	                duplBool = res;
        	            }
  
           });
           </script> 
            -->
    <script src="js/classie.js"></script>
    <script src="js/photostack.js"></script> 
    <script>
    

    </script>
</body>
</html>