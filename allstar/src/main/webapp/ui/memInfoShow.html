<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
#apply_alert {
border:1px black solid; 
width:200px; 
float:right; 
height: 20px; 
margin:10px; 
padding:10px; 
text-align:center;
}
#team_top img{
width:300px;
float:left;
}
#mem_list {
border:1px black solid; 
width:480px; 
height: 400px; 
float:right; 
margin-top: 125px; 
overflow-y:auto;
}
#mem_list figure{
width:150px; 
text-align:center; 
float: left;
}
#mem_list img {
width:150px; 
height:140px;
}


</style>
<script src="js/jquery-1.11.3.js"></script>
<script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=5478d3688900c0aff638bba0a0eb1ff3&libraries=services"></script>
<script>


  </script>
  
</head>



<body>
<div style="height:100px;"></div>


<div id="container" style="min-height:800px; height:100%;">
<div style="margin:auto;  width: 900px; height:100%;">

<!-- Emblem -->
<div id="team_top">
</div>

<!-- 가입신청 알림 -->
<div id="apply_alert" >
</div>


<!-- 회원 목록 -->
<div id="mem_list" >
<figure >
</figure>

</div>
<!-- 회원 목록 끝 -->


<!-- 팀정보 -->
<div style="float:left; font-size:20px; padding: 50px;">
<span style="display: inherit;"> 팀장 : ㄴㅇㄴㅇ </span><br>
<span style="display: inherit;"> 정모일 : 월요일 </span><br>  <!-- 수정가능 -->
<span style="display: inherit;"> 종목 : 축구 </span><br>
<span style="display: inherit;"> 가입현황 : 10명 / 20명 </span><br> <!-- 수정가능 -->
<span style="display: inherit;"> 전적 : 3승 1무 1패 </span><br>
</div>


<div style="float:left; width: 100%; font-size:20px;">
<span >연고지 : 서울 양천구 목동동로 363 (목동, 파리공원)</span>
<div id='map' style='width:500px;height:250px; float:right;'></div>
</div>

<!-- 팀정보 -->

</div>
</div>
<div style="height:100px;"></div>
<script>
$.getJSON('../team/ajax/detail.do?tno=' + $(event.target).attr('teamNo'), function(resultObj) {
var ajaxResult = resultObj.ajaxResult;
var team = ajaxResult.data;
var div =$("team_top");
$("<span>")
.html("<img src='../team/img/"+team.emblem+"'  ></span> "
		+"<span style='float:left; margin-left: 55px; margin-top: 75px;'><h1>"+team.name+"</h1></span>")
		.appendTo(div);
});

$.getJSON('../member/ajax/teamJoin.do?tno=' + $(event.target).attr('teamNo'), function(resultObj) {
var waiting = 0;
for(var joinTeam of resultObj.data){
if(joinTeam.state == 0)
	waiting ++;
}
var div = $("apply_alert");
$("<a style='margin:auto;'>")
.html("대기중 가입 신청수 : " + waiting + "개  </a>").appendTo(div);

for(var joinTeam of resultObj.data){
	if(joinTeam.state == 1) {
var div = $("mem_list") ;
$("<figure >")
.html("<img src='../team/img/"+joinTeam.member.photo+"' >"
+"<figcaption >"+joinTeam.member.name+"</figcaption>"
+"</figure>").appendTo(div);
}
}
});

daumMap('서울 양천구 목동동로 363 (목동, 파리공원)');
/* 다음 지도 */
function daumMap(site) {
  // 키워드로 장소를 검색합니다
  console.log('주소');
  console.log(site);
  if (site.indexOf('(') != -1){
      site = site.split('(')[0];
      console.log(site);
  }
  var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = {
        center: new daum.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };  

// 지도를 생성합니다    
var map = new daum.maps.Map(mapContainer, mapOption); 

// 주소-좌표 변환 객체를 생성합니다
var geocoder = new daum.maps.services.Geocoder();

// 주소로 좌표를 검색합니다
geocoder.addr2coord(site, function(status, result) {

    // 정상적으로 검색이 완료됐으면 
     if (status === daum.maps.services.Status.OK) {
        console.log("-----------------")
        console.log(result.addr[0].lat);
        console.log(result.addr[0].lng);
        var coords = new daum.maps.LatLng(result.addr[0].lat, result.addr[0].lng);

        // 결과값으로 받은 위치를 마커로 표시합니다
        var marker = new daum.maps.Marker({
            map: map,
            position: coords
        });
        // 지도 중심을 변경한다.
        map.setCenter(coords);
        // 인포윈도우로 장소에 대한 설명을 표시합니다
        var infowindow = new daum.maps.InfoWindow({
            content: '<div style="padding:5px;">' + site + '</div>'
        });
        infowindow.open(map, marker);
    } 
});    
}
</script>
</body>
</html>