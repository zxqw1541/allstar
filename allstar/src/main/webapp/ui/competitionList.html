<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link type="text/css" rel="stylesheet" href="css/header_footer.css" />
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/component.css" />
<link rel="stylesheet" type="text/css" href="css/competition.css" />


<link rel="stylesheet" href="css/tos/tos.css" />
<link rel="Shortcut Icon" href="http://s.nx.com/s2/game/tos/common/farvicon.ico" type="image/x-icon" />
<link rel="icon" href="http://s.nx.com/s2/game/tos/common/farvicon.ico" type="image/x-icon" />

<style>
#lean_overlay {
    position: fixed;
    z-index:100;
    top: 100px;
    left: 0px;
    height:100%;
    width:100%;
    background: #000;
    display: none;
}
#detail {
  background-color: #000;
  bottom: 0;
  left: 0;
  opacity: 0.5;
  filter: alpha(opacity = 50);
  /* IE7 & 8 */ position: fixed;
  right: 0;
  top: 0;
  z-index: 99;
  display:none;
}
</style>
<script src="js/jquery-1.11.3.js"></script>
<script src="js/jquery.leanModal.min.js"></script>
<script src="js/modernizr.min.js"></script>


<script>
var pageSize = 7;
$(function(){
  $("#header").load("header.html"); 
  $("#footer").load("footer.html"); 
});

$(function() {
    $('a[rel*=leanModal]').leanModal({ closeButton: ".modal_close" });   
});


</script> 
<script type="text/javascript" src="js/jquery.session.js"></script>
</head>
<body>
<div id="header"></div>
<div style="height:100px;"></div>

<div id="container">
      



  

<div id="content">
  <div class="boardContents boardList">
    <div class="innerWrap">



      <div class="listWrap">


        <div class="listHeader clearFix">
          <h2 class="snbTitSub tit">대회 게시판</h2>
          <div class="sort">
            <ul class="list">
              <li><a href="#"  class='on'>최신순</a></li>
              <li><a href="#"  >댓글순</a></li>
              <li><a href="#"  >좋아요순</a></li>
            </ul>
          </div>
        </div>
        
        <div class="boardList listType1">


          <table id="boardtable">
            <caption>대회 리스트</caption>


            <thead>
              <tr>
                <th class="th1" scope="col">종목</th>
                <th class="th2" scope="col">제목</th>
                <th class="th3" scope="col">작성자</th>
                <th class="th4" scope="col">조회</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="num">농구</td>
                <td class="subject"><a href="view.aspx?n4ArticleSN=370" data-ajax-board="free_view" articlesn="370"><strong>농구대회개최 <small>(3)</small>  </strong><span class="info">모집기간 : 2015.12.10 ~ 2015.12.20</span></a></td>
                <td class="author"><div class="contents"><p class="name name2">2016.03.01</p></div></td>
                <td class="cnt"><span class="view">0 / 36</span><span class="like">인천</span></td>
              </tr>
            </tbody>

          </table>
          
        </div>
        
        
        <div class="btnArea clearFix">
          <p class="fR">
                        
              <a id="newBtn" rel='leanModal' href="#newWrite" class="btn btnType1 btnWrite">글쓰기</a>
                        
          </p>
        </div>
        <div class="paging">
          <span class="fir"><u>처음</u></span> 
          <span class="prev"><u>이전</u></span>
          
          <div class="page_num"> 
          <!-- <span class="nowpage"><b>1</b></span> 
          <a href='#'>2</a> 
          <a href='#'>3</a> 
          <a href='#'>4</a> 
          <a href='#'>5</a> 
          <a href='#'>6</a> 
          <a href='#'>7</a> 
          <a href='#'>8</a> 
          <a href='#'>9</a> 
          <a href='#'>10</a> --> 
          </div>
          <a href="#" class="next" ><u>다음</u></a> 
          <a href="#" class="end" ><u>마지막</u></a>
        </div>
        
        <fieldset class="searchArea">
          <select name="ctl00$Contents$selSearch" id="ctl00_Contents_selSearch">
  <option value="1">제목</option>
  <option value="2">작성자</option>
</select>
          <input name="ctl00$Contents$inputSrch" type="text" id="ctl00_Contents_inputSrch" class="inputTxt" />
                    <input type="submit" name="ctl00$Contents$SearchClick" value="검색" onclick="return search();" id="ctl00_Contents_SearchClick" class="btnSearch btn" />
                    
        </fieldset>
      </div>
    </div>
  </div>
</div>
</div>


<div id="contents" style='display:none; background-color: white; min-width:1258px; margin:auto; overflow:auto;'>
  <div class="viewWrap boardContents boardView" style="width:100%; overflow-y:auto;">
    <article id="subject" class="mainArea">
   
    </article>
    <aside id="rightSide" class="sideArea">
      
    </aside>

  </div>
</div>


<div id="newWrite" style=' display:none; border:1px black solid; background-color: white; width:auto; /* margin:auto; */ left:40%; overflow:auto;'>
  <div id="newBoard" class="viewWrap boardContents boardView" style="width:100%; overflow-y:auto;">
    
              
  </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10" style="margin-left:30%;">
          <button id='addBtn' type='button' class="newForm btn btn-primary btn-xs">등록</button>
        </div>
      </div>
</div> 
<div id="footer"></div>

 

<!-- 대회 리스트 출력 -->
<script>
console.log(location.href);
var pageNo = location.href.split('?')[1].split('=')[1];
if (pageNo == '')
	pageNo = 1;
$.getJSON('/allstar/competition/list.do?pageSize=' + pageSize + '&pageNo = ' + pageNo, function(resultObj) {
  var tbody = $("#boardtable tbody");
  for (var c of resultObj.ajaxResult.data) {
    $("<tr>")
    .html(
    "<td class='num'>" + c.event.name +"</td>"
    + "<td class='subject'><a href='#' data-ajax-board='free_view' articlesn=" + c.cno + "><strong>" + c.name + "<small>(3)</small></strong>"
    + "<span class='info'>모집기간 : " + c.recruitStartDate + " ~ " + c.recruitEndDate + "</span></a></td>"
    + "<td class='author'><div class='contents'><p class='name name2'>" + c.startDate + "</p></div></td>"
    + "<td class='cnt'><span class='view'>" + c.joinNum + " / " + c.teamNum + "</span><span class='like'>" + c.baseAddr +"</span></td>"
    )
    .appendTo(tbody);
  }
});
</script>

<!-- 페이징 -->
<script>
$.getJSON('/allstar/competition/all.do', function(resultObj) {
	  var totalPage = Math.ceil(resultObj.ajaxResult.data / pageSize);
	  console.log(totalPage);
		var pageDiv = $(".page_num");
	  for (var i = 1 ; i <= totalPage ; i++) {
		  if(i == pageNo) {
			  $("<span>").addClass('nowpage')
			  .html("<b>"+ i + "</b>").appendTo(pageDiv); 
		  } else {
		    $("<a>")
		    .html(
		        "<a class='a_pageNo' pageno=" + i + ">"+ i +"</a>"
		    ).appendTo(pageDiv);
		  }
	  };
	  $(".a_pageNo").click(clickPageNo)
});

//페이징 번호를 클릭했을 때 호출될 함수
function clickPageNo(event) {
  location.href = "competitionList.html?pageNo=" + $(event.target).attr("pageno");
}

</script>


</body>
</html>