<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="css/tos/comp.css" />
<style>
#member_photo {
width:391px; 
height:600px; 
border: 1px black solid;
float:right;
overflow-y: auto;
}

#member_photo img {
width:150px;
height:155px;
}

#member_photo p {
width:162px; 
height:190px; 
float: left; 
margin-left: 22px;
}
#member_photo label {
text-align:center;
    color: indigo;
    font-size: 20px;
}

#team_btfld {
border: 1px black solid;
width:394px;
height:280px;
float:right;
margin-top: 0px;
}
#team_information {
width:380px; 
height:923px; 
border: 1px black solid;
}
</style>

<script src="js/test/modernizr.custom.js"></script>

</head>
<body>

	<div>
		<h2 style="text-align: center;">내가 참가한 팀</h2>
		<div class="container demo-3">
			<!-- Top Navigation -->

			<ul class="grid cs-style-4" id="myteams" style="margin-left:">
        

			</ul>
		</div>
		<!-- /container -->
		
		<script src="js/test/toucheffects.js"></script>

	</div>
	<div id="team_info">
	</div>
	<script>
$.getJSON('../member/ajax/memberJoin.do?mno=' +sessionStorage.getItem("mem_num"), function(resultObj) {
    console.log(resultObj.data);
    if(resultObj.status == "success"){
    for (var joinTeam of resultObj.data ){
    	if(joinTeam.level == 0){
    	var event =0;
    	console.log("tno : "+joinTeam.tno+"  eno : "+joinTeam.team.eno);
    	switch(joinTeam.team.eno){
    	case 2:  event = "농구";
    	   break;
    	case 3:  event = "축구";
        break;
    	case 4:  event = "야구";
        break;
    	case 5:  event = "탁구";
        break;
    	case 6:  event = "볼링";
        break;
    	}
    	var emblem = joinTeam.team.emblem;
    	if(emblem == null){
    		emblem = "allstardefault.png";
    	}
    	var ul = $('#myteams');
    	$("<li style='margin-left: 120px;'>")
    	.html("<figure><div>"
    			+"<img src='../team/img/"+emblem+"' style='width:300px;' alt='"+ joinTeam.team.name+"'></div>"
    			+"<figcaption>"
    			+"<h3>"+joinTeam.team.name+"</h3>"
    			+"<span>팀장 : 아 시발 팀장 호출 만들어야대</span><br>"
    			+"<span >연고지 : "+joinTeam.team.postNo+" "+joinTeam.team.baseAddr+" </span><br>"
    			+"<span >종목 : "+event+" </span><br>"
    			+"<span>전적 : "+joinTeam.team.win+" 승  "+joinTeam.team.draw+" 무  "+joinTeam.team.lose+" 패</span><br>"
    			+"<span>내용 : "+joinTeam.team.introduce+"</span><br>"
    			+"<a id='goteam' href='#team_info' rel='leanModal' teamNo='"+joinTeam.tno+"'>팀 정보 보기</a>"
    			+"</figcaption></figure></li>"
    	).appendTo(ul);
    } 
    }
    } else {
    	var ul = $('#myteams');
    	$("<li>").html("현재 참가한 팀이 없습니다. </li>").appendTo(ul);
    }
    $("#goteam").click(goTeamInfo);
});

function goTeamInfo(event){
console.log("teamNo : "+ $(event.target).attr('teamNo'));
$('#myteams').empty();
$.getJSON('../team/ajax/detail.do?tno=' + $(event.target).attr('teamNo') ,function(resultObj){
		var ajaxResult = resultObj.ajaxResult;
        var team = ajaxResult.data;
var ul = $('#myteams');
$("<div style='text-align:center; border: 1px black solid;'>")
.html("<h1>"+team.name+"</h1></div><li id='member_photo' ></li>").appendTo(ul);
});

$.getJSON('../member/ajax/teamJoin.do?tno=' + $(event.target).attr('teamNo') ,function(resultObj){
	for(var joinTeam of resultObj.data) {
	var level = joinTeam.level;
	console.log("jt.mno : " + joinTeam.mno);
	if(level == 1){
		level='팀장';
		}else {
			level='';
		}
var li = $('#member_photo');
$("<p>")
.html("<img id='"+joinTeam.member.id+"' "
		+"src='../member/img/"+joinTeam.member.photo+"' >"
		+"<label for='#"+joinTeam.member.id+" '>"+joinTeam.member.id+" "+level+"</label>").appendTo(li);
	}
var ul = $('#myteams');
$("<li id='team_btfld' >")
.html("</li>").appendTo(ul);

var ul = $('#myteams');
$("<li id='team_information' >")
.html("</li>").appendTo(ul);
        
	});
}


    
</script>


</body>
</html>