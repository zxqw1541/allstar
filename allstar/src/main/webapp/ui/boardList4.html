<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Allstar</title>

<link rel="stylesheet" href="css/header.css">
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" type="text/css" href="css/style.css" media="all" />

<script type="text/javascript" src="js/jquery-1.5.min.js"></script>
<script src="js/superfish.js"></script>
<script src="js/jquery.equalheights.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/jquery.ui.totop.js"></script>
<script type="text/javascript" src="js/ddsmoothmenu.js"></script>
<script type="text/javascript" src="js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" src="js/quicksand.js"></script>
<script type="text/javascript" src="js/scripts.js"></script>
<script>
jQuery(document).ready(function () {
    $().UItoTop({
        easingType: 'easeOutQuart'
    });
});
</script>
<style>

body {
  background-image: url(images/s2.jpg);
  background-repeat: no-repeat;
  background-size: 100% 100%;
}

ul.gallerynav {
  text-decoration: none;
  background-color: none;
  width: 100%;
  height: 30px;
}

ul.statusbar li {
  float:left; 
  margin-left:5%;
}
</style>
</head>

<div style="border:1px black solid; width:100%; height:100%;">
<!-- /////////////////////////////header start//////////////////////-->


<div style="border:1px black solid; width:100%; height:100px;"></div>


<!--///////////////////////// header 끝 /////////////////////////////// -->
<div style="opacity:0.6; color:black; text-align:center; background-color:white; border:1px black solid; width:80%; min-width:1024px; margin-top:2%; margin-left:10%;">
<h1>종목 게시판</h1>
</div>
<div id="portfolio" style="border:1px black solid; width:75%; min-width:1024px; height:60px; margin-left:12.5%;">
<ul class="gallerynav">
<li class="selected-1"><a href="#" data-value="all" style="color:white;">ALL<span></span></a></li>
</ul>
<div class="container_bList" style="text-align:center; width:80%; min-width:1024px; height:70px; border-bottom:1px white solid; color: white; margin-left:7%; margin-bottom:0%; background-color: black; opacity:0.7;">
   <div class="grid_7" style="margin:5px 5px 10px 15px; width:100%; min-width:1024px; font-size:25px;">
       <ul class="statusbar">
          <li style="width:10%;"> 종목 </li> 
          <li style="width:15%;"> 제목 </li>
          <li style="width:15%;"> 작성자 </li>
          <li style="width:10%;"> 조회수 </li>
          <li style="width:20%;"> 등록일 </li>
       </ul>
   </div>
</div>
<ul id="gallery" class="grid">

</ul>
</div>
</div>
<div class="clearfix"></div>
<div class="push"></div>



<a href="#" id="toTop" style="margin-right: -529px; right: 50%; display: inline;"><span id="toTopHover" style="opacity: 1;"></span></a>


<div style="border:1px black solid; width:100%; height:100px; "></div>
<script type="text/javascript">

$(document).ready(function () {
    $("#gallery a[rel^='prettyPhoto']").prettyPhoto({
        theme: 'light_square',
        autoplay_slideshow: false
    });
    
    $("ul.grid img").hide()
    $("ul.grid img").each(function (i) {
        $(this).delay(i * 200).fadeIn();
    });
});

/* 리스트 출력 */
$.getJSON('/allstar/board/ajax/list.do', function(resultObj){
  var eventmenu = $("#eventmenu");
  for (var event of resultObj.events) {
      $("<li>" )
          .html("<a href='#'>" + "* " + event.name + "</a>")
          .appendTo(eventmenu);
    }

  var portul = $(".gallerynav");
  for (var event of resultObj.events) {
    $("<li>" )
        .html("<a href='#' style='color:white;' style='font-size:30px; height:60%; margin-bottom:0px;' data-value='" + event.eno + "'>" + event.name + "<span></span></a>")
        .appendTo(portul);
  }
  
  
  var ul = $("#gallery");
  for (var board of resultObj.boards) {
    var content = board.content;
    console.log(typeof content);
    if (content.length > 40) {
      content = content.substring(0,40).concat("...");
    }
    
    $("<li data-id='id-" + board.no + "' class='" + board.event.eno + "' style='text-align:center; border-bottom:1px solid white; background-color:black; opacity:0.7; margin-left: 7%; margin-bottom:0%; width: 80%; min-width:1024px; height:51px;'>")
    .html(
    		  "<ul class='gallerynav' style=' margin-bottom:10px;'>" 
          + "<li style='color:white; margin-left:5%; width:9%; height:25px; font-size:19px;'>" + board.event.name + "</li>"
          + "<a href='#' class='detailLink' boardBno='" + board.no + "'>" + "<li style='color:white; font-size:19px; margin-left:6.5%; width:14%; height:25px;'>" + board.title + "</li>"
          + "</a>" + "<li style='font-size:19px; color:white; margin-left:7%; width:12%; height:25px;'>" + board.member.name + "</li>"
          + "<li style='font-size:19px; color:white; margin-left:6%; width:10%; height:25px;'>" + board.views + "</li>" + "<li style='font-size:19px; color:white; margin-left:55px; width:20%; height:25px;'>" + board.createDate + "</li>" + "</ul>"
          + "</li></ul>")
    .appendTo(ul);
    
  // 제목 링크에 클릭 이벤트 리스너를 등록한다.
    $("a.detailLink").click(clickDetailLnk);
  
  }
  

  /************************************************************************/// /* SORTING *//************************************************************************/

  (function($) {
    $.fn.sorted = function(customOptions) {
      var options = {
        reversed: false,
        by: function(a) {
          return a.text();
        }
      };
      $.extend(options, customOptions);
    
      $data = $(this);
      arr = $data.get();
      arr.sort(function(a, b) {
        
          var valA = options.by($(a));
          var valB = options.by($(b));
        if (options.reversed) {
          return (valA < valB) ? 1 : (valA > valB) ? -1 : 0;        
        } else {    
          return (valA < valB) ? -1 : (valA > valB) ? 1 : 0;  
        }
      });
      return $(arr);
    };

  })(jQuery);

  $(function() {
    
    var read_button = function(class_names) {
      var r = {
        selected: false,
        type: 0
      };
      for (var i=0; i < class_names.length; i++) {
        if (class_names[i].indexOf('selected-') == 0) {
          r.selected = true;
        }
        if (class_names[i].indexOf('segment-') == 0) {
          r.segment = class_names[i].split('-')[1];
        }
      };
      return r;
    };
    
    var determine_sort = function($buttons) {
      var $selected = $buttons.parent().filter('[class*="selected-"]');
      return $selected.find('a').attr('data-value');
    };
    
    var determine_kind = function($buttons) {
      var $selected = $buttons.parent().filter('[class*="selected-"]');
      return $selected.find('a').attr('data-value');
    };
    
    var $preferences = {
      duration: 800,
      easing: 'easeInOutQuad',
      adjustHeight: false
    };
    
    var $list = $('#gallery');
    var $data = $list.clone();
    
    var $controls = $('.gallerynav');
    
    $controls.each(function(i) {
      
      var $control = $(this);
      var $buttons = $control.find('a');
      
      $buttons.bind('click', function(e) {
        
        var $button = $(this);
        var $button_container = $button.parent();
        var button_properties = read_button($button_container.attr('class').split(' '));      
        var selected = button_properties.selected;
        var button_segment = button_properties.segment;

        if (!selected) {

          $buttons.parent().removeClass('selected-1'); $button_container.addClass('selected-' + 1);
          
          var sorting_type = determine_sort($controls.eq(1).find('a'));
          var sorting_kind = determine_kind($controls.eq(0).find('a'));
          
          if (sorting_kind == 'all') {
            var $filtered_data = $data.find('li');
          } else {
            var $filtered_data = $data.find('li.' + sorting_kind);
          }
          
          if (sorting_type == 'size') {
            var $sorted_data = $filtered_data.sorted({
              by: function(v) {
                return parseFloat($(v).find('span').text());
              }
            });
          } else {
            var $sorted_data = $filtered_data.sorted({
              by: function(v) {
                return $(v).find('strong').text().toLowerCase();
              }
            });
          }
          
          $list.quicksand($sorted_data, function() {
      
      $(document).ready(function(){
        $("#gallery a[rel^='prettyPhoto']").prettyPhoto({theme:'light_square', autoplay_slideshow: false});
      });
      
      $(function() {
      // OPACITY OF BUTTON SET TO 50%
      $("ul.grid img").css("opacity","1.0");
          
      // ON MOUSE OVER
      $("ul.grid img").hover(function () {
                            
      // SET OPACITY TO 100%
      $(this).stop().animate({
      opacity: 0.5
      }, "slow");
      },
          
      // ON MOUSE OUT
      function () {
            
      // SET OPACITY BACK TO 50%
      $(this).stop().animate({
      opacity: 1.0
      }, "slow");
      });
      });
                                  
    $("a.zoom2 img").mouseover(function(){
      $(this).stop(true,true);
      $(this).fadeTo(300, 0.5);
    });
    
    $("a.zoom2 img").mouseout(function(){
      $(this).fadeTo(400, 1.0);
    });
    
    
    $("a.play2 img").mouseover(function(){
      $(this).stop(true,true);
      $(this).fadeTo(300, 0.5);
    });
    
    $("a.play2 img").mouseout(function(){
      $(this).fadeTo(400, 1.0);
    });
    
      });
  }  
        e.preventDefault();
      });
      
    }); 
    
  });
  
});

//게시물 제목을 클릭했을 때 호출될 함수
function clickDetailLnk(event) {
  event.preventDefault(); 
  location.href = "form.html?no=" + $(event.target).attr("boardBno");
}



</script>
</body>
</html>